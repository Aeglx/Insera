# 保险续保数据看板系统

## 项目概述
这是一个基于PHP和MySQL的保险续保数据可视化分析系统，主要用于：
- 展示续保业务关键指标
- 提供数据可视化图表
- 分析业务员和录单员绩效
- 监控续保率和业务趋势

## 主要功能
1. **数据统计**：
   - 总任务量、月任务量统计
   - 续保量、续保率计算
   - 保费金额统计

2. **数据可视化**：
   - 续保走势图表
   - 续保率趋势图
   - 业务员绩效排名

3. **详细数据查看**：
   - 按日期筛选数据
   - 按业务员/录单员筛选
   - 数据排序功能

## 技术栈
- 前端：HTML5, CSS, JavaScript (ECharts)
- 后端：PHP
- 数据库：MySQL
- 服务器：Apache/Nginx

## 安装与配置

### 环境要求
- PHP 7.4+
- MySQL 5.7+
- Web服务器(Apache/Nginx)

### 安装步骤
1. 克隆项目到Web服务器目录
2. 导入数据库结构(参考`db_setup.php`)
3. 修改`config.php`中的数据库配置
4. 确保`assets`和`templates`目录可写

### 数据库设置
1. 创建数据库`juyi`
2. 创建两个表：
   - `xubao`(续保数据表)
   - `yuanshuju`(原始数据表)
3. 运行系统自动创建索引和视图

## 使用说明
1. 访问`index.php`进入系统
2. 系统会自动加载最近30天的数据
3. 使用顶部筛选器选择日期范围
4. 点击图表可查看详细数据

## 注意事项
1. **安全警告**：
   - 默认配置使用空密码，生产环境必须设置强密码
   - 建议限制访问IP或添加认证

2. **数据更新**：
   - 系统依赖`xubao`和`yuanshuju`表的数据
   - 需要定期更新这两个表的数据

3. **性能优化**：
   - 大数据量时建议添加适当索引
   - 可调整`config.php`中的PDO设置优化性能

4. **时区设置**：
   - 系统使用北京时间(Asia/Shanghai)
   - 修改时区需更新`config.php`

## 项目结构
```
├── assets/            # 静态资源
│   └── css/          # CSS样式
├── js/               # JavaScript文件
├── templates/        # 模板文件(JSON格式)
├── config.php        # 配置文件
├── data_processor.php # 数据处理逻辑
├── db_setup.php      # 数据库设置
├── functions.php     # 功能函数库
├── index.php         # 主入口文件
└── README.md         # 项目文档
```

## 开发建议
1. 修改前端样式：编辑`assets/css/style.css`
2. 修改图表配置：编辑`js/final_copy_enhancer.js`
3. 添加新功能：在`functions.php`中添加新函数